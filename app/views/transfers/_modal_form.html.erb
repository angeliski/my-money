<%= turbo_frame_tag "transaction_modal" do %>
  <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"
       data-controller="modal"
       data-action="click->modal#closeBackground">
    <!-- Modal Content: Fullscreen em mobile, modal em desktop -->
    <div class="bg-[#1E1E1E] w-full h-full sm:h-auto sm:max-w-lg sm:rounded-2xl sm:max-h-[90vh] flex flex-col"
         data-controller="money-input"
         data-modal-target="content"
         data-action="click->modal#stopPropagation">

      <!-- Header Roxo com Valor -->
      <div class="bg-gradient-to-b from-[#8B5CF6] to-[#7C3AED] px-6 pt-6 pb-20 sm:rounded-t-2xl flex-shrink-0">
        <button type="button"
                data-action="click->modal#close"
                class="text-white hover:text-white/90 mb-4">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>

        <h2 class="text-2xl font-bold text-white mb-4">Nova transferência</h2>

        <div class="text-white/80 text-sm mb-2">Valor da transferência</div>
        <div class="flex items-baseline gap-2">
          <span class="text-4xl font-bold text-white">R$</span>
          <input type="text"
                 data-money-input-target="input"
                 data-action="input->money-input#format"
                 placeholder="0,00"
                 class="bg-transparent text-4xl font-bold text-white outline-none w-full placeholder-white/50">
        </div>
      </div>

      <!-- Form Body com fundo cinza e cantos arredondados -->
      <div class="bg-[#2D2D2D] -mt-16 rounded-t-3xl flex-1 overflow-y-auto pt-6 px-6 pb-6 sm:pb-0">
        <% if defined?(error) && error.present? %>
          <div class="bg-red-900/30 border border-red-700 text-red-300 px-4 py-3 rounded-lg mb-4">
            <%= error %>
          </div>
        <% end %>

        <%= render "form" %>
      </div>
    </div>
  </div>
<% end %>
